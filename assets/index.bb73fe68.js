var Vi=Object.defineProperty;var zi=(t,e,n)=>e in t?Vi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Gt=(t,e,n)=>(zi(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ct=window,Bn=Ct.ShadowRoot&&(Ct.ShadyCSS===void 0||Ct.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Nn=Symbol(),rr=new WeakMap;class Ir{constructor(e,n,r){if(this._$cssResult$=!0,r!==Nn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Bn&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=rr.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&rr.set(n,e))}return e}toString(){return this.cssText}}const Je=t=>new Ir(typeof t=="string"?t:t+"",void 0,Nn),Br=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,a)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[a+1],t[0]);return new Ir(n,t,Nn)},Wi=(t,e)=>{Bn?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),i=Ct.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)})},ir=Bn?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Je(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Qt;const Dt=window,ar=Dt.trustedTypes,Yi=ar?ar.emptyScript:"",or=Dt.reactiveElementPolyfillSupport,cn={toAttribute(t,e){switch(e){case Boolean:t=t?Yi:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Nr=(t,e)=>e!==t&&(e==e||t==t),Xt={attribute:!0,type:String,converter:cn,reflect:!1,hasChanged:Nr};class Re extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const i=this._$Ep(r,n);i!==void 0&&(this._$Ev.set(i,r),e.push(i))}),e}static createProperty(e,n=Xt){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(i){const a=this[e];this[n]=i,this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Xt}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of r)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(ir(i))}else e!==void 0&&n.push(ir(e));return n}static _$Ep(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Wi(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EO(e,n,r=Xt){var i;const a=this.constructor._$Ep(e,r);if(a!==void 0&&r.reflect===!0){const o=(((i=r.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?r.converter:cn).toAttribute(n,r.type);this._$El=e,o==null?this.removeAttribute(a):this.setAttribute(a,o),this._$El=null}}_$AK(e,n){var r;const i=this.constructor,a=i._$Ev.get(e);if(a!==void 0&&this._$El!==a){const o=i.getPropertyOptions(a),s=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?o.converter:cn;this._$El=a,this[a]=s.fromAttribute(n,o.type),this._$El=null}}requestUpdate(e,n,r){let i=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||Nr)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,a)=>this[a]=i),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var a;return(a=i.hostUpdate)===null||a===void 0?void 0:a.call(i)}),this.update(r)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var i;return(i=r.hostUpdated)===null||i===void 0?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}Re.finalized=!0,Re.elementProperties=new Map,Re.elementStyles=[],Re.shadowRootOptions={mode:"open"},or==null||or({ReactiveElement:Re}),((Qt=Dt.reactiveElementVersions)!==null&&Qt!==void 0?Qt:Dt.reactiveElementVersions=[]).push("1.4.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var qt;const Ot=window,Me=Ot.trustedTypes,sr=Me?Me.createPolicy("lit-html",{createHTML:t=>t}):void 0,pe=`lit$${(Math.random()+"").slice(9)}$`,Fr="?"+pe,Gi=`<${Fr}>`,Ie=document,Ze=(t="")=>Ie.createComment(t),et=t=>t===null||typeof t!="object"&&typeof t!="function",Lr=Array.isArray,Qi=t=>Lr(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Ve=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ur=/-->/g,cr=/>/g,_e=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),lr=/'/g,fr=/"/g,jr=/^(?:script|style|textarea|title)$/i,Xi=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),qi=Xi(1),ye=Symbol.for("lit-noChange"),L=Symbol.for("lit-nothing"),hr=new WeakMap,Oe=Ie.createTreeWalker(Ie,129,null,!1),Ji=(t,e)=>{const n=t.length-1,r=[];let i,a=e===2?"<svg>":"",o=Ve;for(let u=0;u<n;u++){const c=t[u];let f,l,h=-1,y=0;for(;y<c.length&&(o.lastIndex=y,l=o.exec(c),l!==null);)y=o.lastIndex,o===Ve?l[1]==="!--"?o=ur:l[1]!==void 0?o=cr:l[2]!==void 0?(jr.test(l[2])&&(i=RegExp("</"+l[2],"g")),o=_e):l[3]!==void 0&&(o=_e):o===_e?l[0]===">"?(o=i!=null?i:Ve,h=-1):l[1]===void 0?h=-2:(h=o.lastIndex-l[2].length,f=l[1],o=l[3]===void 0?_e:l[3]==='"'?fr:lr):o===fr||o===lr?o=_e:o===ur||o===cr?o=Ve:(o=_e,i=void 0);const p=o===_e&&t[u+1].startsWith("/>")?" ":"";a+=o===Ve?c+Gi:h>=0?(r.push(f),c.slice(0,h)+"$lit$"+c.slice(h)+pe+p):c+pe+(h===-2?(r.push(void 0),u):p)}const s=a+(t[n]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[sr!==void 0?sr.createHTML(s):s,r]};class tt{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let a=0,o=0;const s=e.length-1,u=this.parts,[c,f]=Ji(e,n);if(this.el=tt.createElement(c,r),Oe.currentNode=this.el.content,n===2){const l=this.el.content,h=l.firstChild;h.remove(),l.append(...h.childNodes)}for(;(i=Oe.nextNode())!==null&&u.length<s;){if(i.nodeType===1){if(i.hasAttributes()){const l=[];for(const h of i.getAttributeNames())if(h.endsWith("$lit$")||h.startsWith(pe)){const y=f[o++];if(l.push(h),y!==void 0){const p=i.getAttribute(y.toLowerCase()+"$lit$").split(pe),d=/([.?@])?(.*)/.exec(y);u.push({type:1,index:a,name:d[2],strings:p,ctor:d[1]==="."?ea:d[1]==="?"?na:d[1]==="@"?ra:Ut})}else u.push({type:6,index:a})}for(const h of l)i.removeAttribute(h)}if(jr.test(i.tagName)){const l=i.textContent.split(pe),h=l.length-1;if(h>0){i.textContent=Me?Me.emptyScript:"";for(let y=0;y<h;y++)i.append(l[y],Ze()),Oe.nextNode(),u.push({type:2,index:++a});i.append(l[h],Ze())}}}else if(i.nodeType===8)if(i.data===Fr)u.push({type:2,index:a});else{let l=-1;for(;(l=i.data.indexOf(pe,l+1))!==-1;)u.push({type:7,index:a}),l+=pe.length-1}a++}}static createElement(e,n){const r=Ie.createElement("template");return r.innerHTML=e,r}}function Be(t,e,n=t,r){var i,a,o,s;if(e===ye)return e;let u=r!==void 0?(i=n._$Co)===null||i===void 0?void 0:i[r]:n._$Cl;const c=et(e)?void 0:e._$litDirective$;return(u==null?void 0:u.constructor)!==c&&((a=u==null?void 0:u._$AO)===null||a===void 0||a.call(u,!1),c===void 0?u=void 0:(u=new c(t),u._$AT(t,n,r)),r!==void 0?((o=(s=n)._$Co)!==null&&o!==void 0?o:s._$Co=[])[r]=u:n._$Cl=u),u!==void 0&&(e=Be(t,u._$AS(t,e.values),u,r)),e}class Zi{constructor(e,n){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var n;const{el:{content:r},parts:i}=this._$AD,a=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:Ie).importNode(r,!0);Oe.currentNode=a;let o=Oe.nextNode(),s=0,u=0,c=i[0];for(;c!==void 0;){if(s===c.index){let f;c.type===2?f=new ht(o,o.nextSibling,this,e):c.type===1?f=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&(f=new ia(o,this,e)),this.u.push(f),c=i[++u]}s!==(c==null?void 0:c.index)&&(o=Oe.nextNode(),s++)}return a}p(e){let n=0;for(const r of this.u)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class ht{constructor(e,n,r,i){var a;this.type=2,this._$AH=L,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cm=(a=i==null?void 0:i.isConnected)===null||a===void 0||a}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Be(this,e,n),et(e)?e===L||e==null||e===""?(this._$AH!==L&&this._$AR(),this._$AH=L):e!==this._$AH&&e!==ye&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Qi(e)?this.k(e):this.g(e)}O(e,n=this._$AB){return this._$AA.parentNode.insertBefore(e,n)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==L&&et(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ie.createTextNode(e)),this._$AH=e}$(e){var n;const{values:r,_$litType$:i}=e,a=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=tt.createElement(i.h,this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===a)this._$AH.p(r);else{const o=new Zi(a,this),s=o.v(this.options);o.p(r),this.T(s),this._$AH=o}}_$AC(e){let n=hr.get(e.strings);return n===void 0&&hr.set(e.strings,n=new tt(e)),n}k(e){Lr(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const a of e)i===n.length?n.push(r=new ht(this.O(Ze()),this.O(Ze()),this,this.options)):r=n[i],r._$AI(a),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cm=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class Ut{constructor(e,n,r,i,a){this.type=1,this._$AH=L,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=a,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=L}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,i){const a=this.strings;let o=!1;if(a===void 0)e=Be(this,e,n,0),o=!et(e)||e!==this._$AH&&e!==ye,o&&(this._$AH=e);else{const s=e;let u,c;for(e=a[0],u=0;u<a.length-1;u++)c=Be(this,s[r+u],n,u),c===ye&&(c=this._$AH[u]),o||(o=!et(c)||c!==this._$AH[u]),c===L?e=L:e!==L&&(e+=(c!=null?c:"")+a[u+1]),this._$AH[u]=c}o&&!i&&this.j(e)}j(e){e===L?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class ea extends Ut{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===L?void 0:e}}const ta=Me?Me.emptyScript:"";class na extends Ut{constructor(){super(...arguments),this.type=4}j(e){e&&e!==L?this.element.setAttribute(this.name,ta):this.element.removeAttribute(this.name)}}class ra extends Ut{constructor(e,n,r,i,a){super(e,n,r,i,a),this.type=5}_$AI(e,n=this){var r;if((e=(r=Be(this,e,n,0))!==null&&r!==void 0?r:L)===ye)return;const i=this._$AH,a=e===L&&i!==L||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==L&&(i===L||a);a&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class ia{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Be(this,e)}}const dr=Ot.litHtmlPolyfillSupport;dr==null||dr(tt,ht),((qt=Ot.litHtmlVersions)!==null&&qt!==void 0?qt:Ot.litHtmlVersions=[]).push("2.4.0");const aa=(t,e,n)=>{var r,i;const a=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:e;let o=a._$litPart$;if(o===void 0){const s=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:null;a._$litPart$=o=new ht(e.insertBefore(Ze(),s),s,void 0,n!=null?n:{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Jt,Zt;class Ge extends Re{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=aa(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return ye}}Ge.finalized=!0,Ge._$litElement$=!0,(Jt=globalThis.litElementHydrateSupport)===null||Jt===void 0||Jt.call(globalThis,{LitElement:Ge});const pr=globalThis.litElementPolyfillSupport;pr==null||pr({LitElement:Ge});((Zt=globalThis.litElementVersions)!==null&&Zt!==void 0?Zt:globalThis.litElementVersions=[]).push("3.2.2");var oa=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};function sa(){return t=>{}}let nt=class extends Ge{};nt=oa([sa()],nt);const ua=["january","february","march","april","may","june","july","august","september","october","november","december"];ua.map(t=>t.slice(0,3));function rt(t){let e;try{e=Reflect.ownKeys(t)}catch{}return e!=null?e:[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}const ca=[(t,e)=>e in t,(t,e)=>e in t.constructor.prototype];function la(t,e){return t?ca.some(n=>{try{return n(t,e)}catch{return!1}}):!1}function fa(t,e){return t&&e.every(n=>la(t,n))}function it(t,e){let n=!1;const r=rt(t).reduce((i,a)=>{const o=e(a,t[a],t);return o instanceof Promise&&(n=!0),{...i,[a]:o}},{});return n?new Promise(async(i,a)=>{try{await Promise.all(rt(r).map(async o=>{const s=await r[o];r[o]=s})),i(r)}catch(o){a(o)}}):r}const Hr={capitalizeFirstLetter:!1};function ha(t){var e;return t.length?((e=t[0])!==null&&e!==void 0?e:"").toUpperCase()+t.slice(1):""}function da(t,e=Hr){return e.capitalizeFirstLetter?ha(t):t}function pa(t,e=Hr){const n=t.toLowerCase();if(!n.length)return"";const r=n.replace(/^-+/,"").replace(/-{2,}/g,"-").replace(/-(?:.|$)/g,i=>{const a=i[1];return a?a.toUpperCase():""});return da(r,e)}function vr(t){return t!==t.toUpperCase()}function va(t){return t.split("").reduce((n,r,i,a)=>{var o,s;const u=i>0&&(o=a[i-1])!==null&&o!==void 0?o:"",c=i<a.length&&(s=a[i+1])!==null&&s!==void 0?s:"",f=vr(u)||vr(c);return r===r.toLowerCase()||i===0||!f?n+=r:n+=`-${r.toLowerCase()}`,n},"").toLowerCase()}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ya=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};function yr(t){return(e,n)=>n!==void 0?((r,i,a)=>{i.constructor.createProperty(a,r)})(t,e,n):ya(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var en;((en=window.HTMLSlotElement)===null||en===void 0?void 0:en.prototype.assignedElements)!=null;const ln=Symbol("this-is-an-element-vir-declarative-element");function Ur(t,e){return`${t}-${va(e)}`}function ma(t,e){return e?it(e,n=>Je(`--${Ur(t,String(n))}`)):{}}function ga(t,e){return t?it(t,(n,r)=>{const i=e[n];return Je(`var(${i}, ${r})`)}):{}}const Vr=Symbol("key for ignoring inputs not having been set yet"),ba={[Vr]:!0};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _a={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},zr=t=>(...e)=>({_$litDirective$:t,values:e});class Wr{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}}function wa(t,e){return Yr(t,e,nt)}function Yr(t,e,n){Ea(t,e);const r=t.element;if(!(r instanceof n))throw new Error(`${e} attached to non ${n.name} element.`);return r}function Ea(t,e){if(t.type!==_a.ELEMENT)throw new Error(`${e} directive can only be attached directly to an element.`);if(!t.element)throw new Error(`${e} directive found no element.`)}function Aa(t,e){return xa(t,e)}const xa=zr(class extends Wr{constructor(t){super(t),this.element=wa(t,"assign")}render(t,e){return Ca(t,this.element,e),ye}});function Ca(t,e,n){if(e.tagName.toLowerCase()!==t.tagName.toLowerCase())throw console.error(e,t),new Error(`Assignment mismatch. Assignment was made for ${e.tagName.toLowerCase()} but it's attached to ${t.tagName.toLowerCase()}`);e.assignInputs(n)}class $a extends CustomEvent{constructor(e,n){super(typeof e=="string"?e:e.type,{detail:n,bubbles:!0,composed:!0}),this._type=""}get type(){return this._type}}function Sa(){return t=>{var e;return e=class extends $a{constructor(n){super(t,n),this._type=t}},e.type=t,e}}function ka(t){return t?Object.keys(t).filter(e=>{if(typeof e!="string")throw new Error(`Expected event key of type string but got type "${typeof e}" for key ${String(e)}`);if(e==="")throw new Error("Got empty string for events key.");return!0}).reduce((e,n)=>{const r=Sa()(n);return e[n]=r,e},{}):{}}function mr(t,e,n){if(typeof t!="string"&&typeof t!="number"&&typeof t!="symbol")throw new Error(`Property name must be a string, got type "${typeof t}" from: "${String(t)}" for ${n.toLowerCase()}`);if(!(t in e))throw new Error(`Property "${String(t)}" does not exist on ${n.toLowerCase()}.`)}function gr(t,e){const n=t;return new Proxy({},{get:(i,a)=>{e&&mr(a,t,t.tagName);const o=i[a];return typeof o=="function"?o.bind(i):n[a]},set:(i,a,o)=>(e&&mr(a,t,t.tagName),i[a]=o,n[a]=o,!0),ownKeys:i=>Reflect.ownKeys(i),getOwnPropertyDescriptor(i,a){if(a in i)return{get value(){return i[a]},configurable:!0,enumerable:!0}},has:(i,a)=>Reflect.has(i,a)})}function Gr(t){const e=t.getRootNode();if(!(e instanceof ShadowRoot))return!1;const n=e.host;return n instanceof nt?!0:Gr(n)}function Ta(t,e){return e?it(e,n=>Ur(t,String(n))):{}}function Pa(t,e){return{dispatch:r=>t.dispatchEvent(r),genericDispatch:r=>t.dispatchEvent(r),updateState:r=>{rt(r).forEach(i=>{t.instanceState[i]=r[i]})},inputs:t.instanceInputs,host:t,state:t.instanceState,events:e}}function Ra({hostClassNames:t,cssVarNames:e,cssVarValues:n}){return{hostClassSelectors:it(t,(r,i)=>Je(`:host(.${i})`)),hostClassNames:it(t,(r,i)=>Je(i)),cssVarNames:e,cssVarValues:n}}function Da({host:t,hostClassesInit:e,hostClassNames:n,state:r,inputs:i}){!e||rt(e).forEach(a=>{const o=e[a],s=n[a];typeof o=="function"&&(o({state:r,inputs:i})?t.classList.add(s):t.classList.remove(s))})}function Qr(t){var e;const n=ka(t.events),r=Ta(t.tagName,t.hostClasses),i=ma(t.tagName,t.cssVars),a=ga(t.cssVars,i),o={...ba,...t.options},s=typeof t.styles=="function"?t.styles(Ra({hostClassNames:r,cssVarNames:i,cssVarValues:a})):t.styles||Br``,u=t.renderCallback,c=(e=class extends nt{constructor(){super(),this.initCalled=!1,this.haveInputsBeenSet=!1,this.definition={},this.instanceInputs=gr(this,!1),this.instanceState=gr(this,!0);const f=t.stateInit||{};Object.keys(f).forEach(l=>{yr()(this,l),this[l]=f[l]}),this.definition=c}createRenderParams(){return Pa(this,n)}get instanceType(){throw new Error(`"instanceType" was called on ${t.tagName} as a value but it is only for types.`)}static get inputsType(){throw new Error(`"inputsType" was called on ${t.tagName} as a value but it is only for types.`)}static get stateType(){throw new Error(`"stateType" was called on ${t.tagName} as a value but it is only for types.`)}markInputsAsHavingBeenSet(){this.haveInputsBeenSet||(this.haveInputsBeenSet=!0)}render(){Gr(this)&&!this.haveInputsBeenSet&&!o[Vr]&&console.warn(this,`${t.tagName} got rendered before its input object was set. This was most likely caused by forgetting to use the "${Aa.name}" directive on it. If no inputs are intended, use "${Qr.name}" to define ${t.tagName}.`);const f=this.createRenderParams();!this.initCalled&&t.initCallback&&(this.initCalled=!0,t.initCallback(f));const l=t.renderCallback(f);return Da({host:f.host,hostClassesInit:t.hostClasses,hostClassNames:r,state:f.state,inputs:f.inputs}),l}disconnectedCallback(){if(super.disconnectedCallback(),t.cleanupCallback){const f=this.createRenderParams();t.cleanupCallback(f)}this.initCalled=!1}assignInputs(f){rt(f).forEach(l=>{yr()(this,l),this.instanceInputs[l]=f[l]}),this.markInputsAsHavingBeenSet()}},e.tagName=t.tagName,e.styles=s,e.isStrictInstance=()=>!1,e.events=n,e.renderCallback=u,e.hostClasses=r,e.cssVarNames=i,e.stateInit=t.stateInit,e.cssVarValues=i,e);return Object.defineProperties(c,{[ln]:{value:!0,writable:!1},name:{value:pa(t.tagName,{capitalizeFirstLetter:!0}),writable:!0},isStrictInstance:{value:f=>f instanceof c,writable:!1}}),window.customElements.define(t.tagName,c),c}function Oa(t,e){return Ka(t,e)}const Ka=zr(class extends Wr{constructor(t){super(t),this.element=Yr(t,"listen",HTMLElement)}resetListener(t){this.lastListenerMetaData&&this.element.removeEventListener(this.lastListenerMetaData.eventType,this.lastListenerMetaData.listener),this.element.addEventListener(t.eventType,t.listener),this.lastListenerMetaData=t}createListenerMetaData(t,e){return{eventType:t,callback:e,listener:n=>{var r;return(r=this.lastListenerMetaData)===null||r===void 0?void 0:r.callback(n)}}}render(t,e){const n=typeof t=="string"?t:t.type;if(typeof n!="string")throw new Error(`Cannot listen to an event with a name that is not a string. Given event name: "${n}"`);return this.lastListenerMetaData&&this.lastListenerMetaData.eventType===n?this.lastListenerMetaData.callback=e:this.resetListener(this.createListenerMetaData(n,e)),ye}});function Ma(t,e){return t.filter((n,r)=>!e.includes(r))}function Xr(t){return t.filter(e=>fa(e,["tagName",ln])&&!!e.tagName&&!!e[ln])}const qr=new WeakMap;function Ia(t,e){var n;const r=Xr(e);return(n=Jr(qr,[t,...r]).value)===null||n===void 0?void 0:n.template}function Ba(t,e,n){const r=Xr(e);return ei(qr,[t,...r],n)}function Jr(t,e,n=0){const{currentTemplateAndNested:r,reason:i}=Zr(t,e,n);return r?n===e.length-1?{value:r,reason:"reached end of keys array"}:r.nested?Jr(r.nested,e,n+1):{value:void 0,reason:`map at key index ${n} did not have nested maps`}:{value:r,reason:i}}function Zr(t,e,n){const r=e[n];if(r==null)return{currentKey:void 0,currentTemplateAndNested:void 0,reason:`key at index ${n} not found`};if(!t.has(r))return{currentKey:r,currentTemplateAndNested:void 0,reason:`key at index ${n} was not in the map`};const i=t.get(r);return i==null?{currentKey:r,currentTemplateAndNested:void 0,reason:`value at key at index ${n} was undefined`}:{currentKey:r,currentTemplateAndNested:i,reason:"key and value exists"}}function ei(t,e,n,r=0){var i;const{currentTemplateAndNested:a,currentKey:o,reason:s}=Zr(t,e,r);if(!o)return{result:!1,reason:s};const u=a!=null?a:{nested:void 0,template:void 0};if(a||t.set(o,u),r===e.length-1)return u.template=n,{result:!0,reason:"set value at end of keys array"};const c=(i=u.nested)!==null&&i!==void 0?i:new WeakMap;return u.nested||(u.nested=c),ei(c,e,n,r+1)}function ti(t,e,n){return{name:t,check:e,transform:n}}const Na=new WeakMap;function ni(t,e,n){const r=Ia(t,e),i=r!=null?r:n();if(!r){const o=Ba(t,e,i);if(o.result)Na.set(t,i);else throw new Error(`Failed to set template transform: ${o.reason}`)}const a=Ma(e,i.valueIndexDeletions);return{strings:i.templateStrings,values:a}}function ri(t,e,n,r){const i=[],a=[],o=[];return t.forEach((u,c)=>{var f;const l=i.length-1,h=i[l],y=c-1,p=e[y];let d;r&&r(u),typeof h=="string"&&(d=(f=n.find(_=>_.check(h,u,p)))===null||f===void 0?void 0:f.transform,d&&(i[l]=h+d(p)+u,o.push(y))),d||i.push(u);const m=t.raw[c];d?a[l]=a[l]+d(p)+m:a.push(m)}),{templateStrings:Object.assign([],i,{raw:a}),valueIndexDeletions:o}}function ii(t){return typeof t=="function"&&t.hasOwnProperty("tagName")&&typeof t.tagName=="string"&&t.tagName.includes("-")}const Fa=[ti("tag name css selector interpolation",(t,e,n)=>ii(n),t=>t.tagName)];function La(t,e){return ri(t,e,Fa)}function ja(t,...e){const n=ni(t,e,()=>La(t,e));return Br(n.strings,...n.values)}const Ha=[ti("tag name interpolation",(t,e,n)=>{const r=t.trim().endsWith("<")&&!!e.match(/^[\s\n>]/)||(t==null?void 0:t.trim().endsWith("</"))&&e.trim().startsWith(">"),i=ii(n);if(r&&!i)throw console.error({lastNewString:t,currentLitString:e,currentValue:n}),new Error(`Got interpolated tag name but it wasn't of type VirElement: ${n.prototype.constructor.name}`);return r&&i},t=>t.tagName)];function Ua(t){}function Va(t){return ri(t.strings,t.values,Ha,Ua)}function br(t,...e){const n=qi(t,...e),r=ni(t,e,()=>Va(n));return{...n,strings:r.strings,values:r.values}}async function za(t,e){await Wa(t,e)}async function Wa(t,e){return await t.reduce(async(r,i,a,o)=>{const s=await r,u=await e(i,a,o);return s.push(u),s},Promise.resolve([]))}const Ya=["january","february","march","april","may","june","july","august","september","october","november","december"];Ya.map(t=>t.slice(0,3));function Ga(t){return!!t}function Qa(t){return t?t instanceof Error?t.message:String(t):""}function _r(t){let e;try{e=Reflect.ownKeys(t)}catch{}return e!=null?e:[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}const Xa=[(t,e)=>e in t,(t,e)=>e in t.constructor.prototype];function fn(t,e){return t?Xa.some(n=>{try{return n(t,e)}catch{return!1}}):!1}function ai(t){return!!t&&typeof t=="object"}function oi(t,e,n=!1){const r=_r(t),i=new Set(_r(e));if(!n){const a=r.filter(o=>!i.has(o));if(a.length)throw new Error(`Test object has extra keys: ${a.join(", ")}`)}i.forEach(a=>{if(!fn(t,a))throw new Error(`test object does not have key "${String(a)}" from expected shape.`);function o(c){throw new Error(`test object value at key "${String(a)}" did not match expected shape: ${c}`)}const s=t[a],u=e[a];si(s,u,o)})}function si(t,e,n){var r;const i=typeof t,a=typeof e;i!==a&&n(`type "${i}" did not match expected type "${a}"`);try{fn(e,"constructor")&&(!fn(t,"constructor")||t.constructor!==e.constructor)&&n(`constructor "${(r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name}" did not match expected constructor "${e.constructor}"`)}catch(o){if(o instanceof n)throw o}Array.isArray(e)?(Array.isArray(t)||n("expected an array"),t.forEach((o,s)=>{if(e.map(c=>{try{si(o,c,n);return}catch(f){return new Error(`entry at index "${s}" did not match expected shape: ${Qa(f)}`)}}).filter(Ga).length===e.length)throw new Error(`entry at index "${s}" did not match any of the possible types from "${e.join(", ")}"`)})):ai(e)&&oi(t,e)}function ui(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});if(!t||!e)throw new Error(`Reject and resolve callbacks were not set by the promise constructor for ${ui.name}.`);return{promise:n,resolve:t,reject:e}}function ci(){return t=>t}function li(t){return Object.values(t).map(e=>ai(e)?li(e).flat():e).flat()}const Fn=ci()({java:{1:{19:{3:"java.1.19.3",2:"java.1.19.2"}}}});li(Fn);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R=function(){return R=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},R.apply(this,arguments)};function hn(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var I=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,N=Object.keys,U=Array.isArray;typeof Promise<"u"&&!I.Promise&&(I.Promise=Promise);function z(t,e){return typeof e!="object"||N(e).forEach(function(n){t[n]=e[n]}),t}var at=Object.getPrototypeOf,qa={}.hasOwnProperty;function Y(t,e){return qa.call(t,e)}function Ne(t,e){typeof e=="function"&&(e=e(at(t))),(typeof Reflect>"u"?N:Reflect.ownKeys)(e).forEach(function(n){ue(t,n,e[n])})}var fi=Object.defineProperty;function ue(t,e,n,r){fi(t,e,z(n&&Y(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Fe(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ue(t.prototype,"constructor",t),{extend:Ne.bind(null,t.prototype)}}}}var Ja=Object.getOwnPropertyDescriptor;function Ln(t,e){var n=Ja(t,e),r;return n||(r=at(t))&&Ln(r,e)}var Za=[].slice;function Vt(t,e,n){return Za.call(t,e,n)}function hi(t,e){return e(t)}function We(t){if(!t)throw new Error("Assertion Failed")}function di(t){I.setImmediate?setImmediate(t):setTimeout(t,0)}function pi(t,e){return t.reduce(function(n,r,i){var a=e(r,i);return a&&(n[a[0]]=a[1]),n},{})}function eo(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function se(t,e){if(Y(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var a=se(t,e[r]);n.push(a)}return n}var o=e.indexOf(".");if(o!==-1){var s=t[e.substr(0,o)];return s===void 0?void 0:se(s,e.substr(o+1))}}function J(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){We(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)J(t,e[r],n[r])}else{var a=e.indexOf(".");if(a!==-1){var o=e.substr(0,a),s=e.substr(a+1);if(s==="")n===void 0?U(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var u=t[o];(!u||!Y(t,o))&&(u=t[o]={}),J(u,s,n)}}else n===void 0?U(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function to(t,e){typeof e=="string"?J(t,e,void 0):"length"in e&&[].map.call(e,function(n){J(t,n,void 0)})}function vi(t){var e={};for(var n in t)Y(t,n)&&(e[n]=t[n]);return e}var no=[].concat;function yi(t){return no.apply([],t)}var mi="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(yi([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return I[t]}),ro=mi.map(function(t){return I[t]});pi(mi,function(t){return[t,!0]});var de=null;function dt(t){de=typeof WeakMap<"u"&&new WeakMap;var e=dn(t);return de=null,e}function dn(t){if(!t||typeof t!="object")return t;var e=de&&de.get(t);if(e)return e;if(U(t)){e=[],de&&de.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(dn(t[n]))}else if(ro.indexOf(t.constructor)>=0)e=t;else{var i=at(t);e=i===Object.prototype?{}:Object.create(i),de&&de.set(t,e);for(var a in t)Y(t,a)&&(e[a]=dn(t[a]))}return e}var io={}.toString;function pn(t){return io.call(t).slice(8,-1)}var vn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ao=typeof vn=="symbol"?function(t){var e;return t!=null&&(e=t[vn])&&e.apply(t)}:function(){return null},De={};function ae(t){var e,n,r,i;if(arguments.length===1){if(U(t))return t.slice();if(this===De&&typeof t=="string")return[t];if(i=ao(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var jn=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gi(t,e){ne=t,bi=e}var bi=function(){return!0},oo=!new Error("").stack;function ke(){if(oo)try{throw ke.arguments,new Error}catch(t){return t}return new Error}function yn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(bi).map(function(r){return`
`+r}).join("")):""}var so=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],_i=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hn=so.concat(_i),uo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Le(t,e){this._e=ke(),this.name=t,this.message=e}Fe(Le).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+yn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function wi(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Kt(t,e,n,r){this._e=ke(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=wi(t,e)}Fe(Kt).from(Le);function Qe(t,e){this._e=ke(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=wi(t,e)}Fe(Qe).from(Le);var Un=Hn.reduce(function(t,e){return t[e]=e+"Error",t},{}),co=Le,k=Hn.reduce(function(t,e){var n=e+"Error";function r(i,a){this._e=ke(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=uo[e]||n,this.inner=null)}return Fe(r).from(co),t[e]=r,t},{});k.Syntax=SyntaxError;k.Type=TypeError;k.Range=RangeError;var wr=_i.reduce(function(t,e){return t[e+"Error"]=k[e],t},{});function lo(t,e){if(!t||t instanceof Le||t instanceof TypeError||t instanceof SyntaxError||!t.name||!wr[t.name])return t;var n=new wr[t.name](e||t.message,t);return"stack"in t&&ue(n,"stack",{get:function(){return this.inner.stack}}),n}var zt=Hn.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=k[e]),t},{});zt.ModifyError=Kt;zt.DexieError=Le;zt.BulkError=Qe;function M(){}function pt(t){return t}function fo(t,e){return t==null||t===pt?e:function(n){return e(t(n))}}function $e(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ho(t,e){return t===M?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?$e(r,this.onsuccess):r),i&&(this.onerror=this.onerror?$e(i,this.onerror):i),a!==void 0?a:n}}function po(t,e){return t===M?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?$e(n,this.onsuccess):n),r&&(this.onerror=this.onerror?$e(r,this.onerror):r)}}function vo(t,e){return t===M?e:function(n){var r=t.apply(this,arguments);z(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?$e(i,this.onsuccess):i),a&&(this.onerror=this.onerror?$e(a,this.onerror):a),r===void 0?o===void 0?void 0:o:z(r,o)}}function yo(t,e){return t===M?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Vn(t,e){return t===M?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return e.apply(r,a)})}return e.apply(this,arguments)}}var ot={},mo=100,go=20,Ei=100,zn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,at(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,at(e),t]}(),mn=zn[0],Mt=zn[1],gn=zn[2],Ai=Mt&&Mt.then,$t=mn&&mn.constructor,Wn=!!gn,bn=!1,bo=gn?function(){gn.then(_t)}:I.setImmediate?setImmediate.bind(null,_t):I.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){_t(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(_t,0)},st=function(t,e){Ye.push([t,e]),It&&(bo(),It=!1)},_n=!0,It=!0,xe=[],St=[],wn=null,En=pt,Ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{xr(t[0],t[1])}catch{}})}},C=Ke,Ye=[],Ce=0,kt=[];function x(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=M,this._lib=!1;var e=this._PSD=C;if(ne&&(this._stackHolder=ke(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==ot)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&xn(this,this._value);return}this._state=null,this._value=null,++e.ref,Ci(this,t)}var An={get:function(){var t=C,e=Bt;function n(r,i){var a=this,o=!t.global&&(t!==C||e!==Bt),s=o&&!ce(),u=new x(function(c,f){Yn(a,new xi(Ft(r,t,o,s),Ft(i,t,o,s),c,f,t))});return ne&&ki(u,this),u}return n.prototype=ot,n},set:function(t){ue(this,"then",t&&t.prototype===ot?An:{get:function(){return t},set:An.set})}};Ne(x.prototype,{then:An,_then:function(t,e){Yn(this,new xi(null,null,t,e,C))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):Tt(r)}):this.then(null,function(r){return r&&r.name===e?n(r):Tt(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),Tt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{bn=!0;var t=Si(this,[],go),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{bn=!1}}},timeout:function(t,e){var n=this;return t<1/0?new x(function(r,i){var a=setTimeout(function(){return i(new k.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&ue(x.prototype,Symbol.toStringTag,"Dexie.Promise");Ke.env=Ti();function xi(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}Ne(x,{all:function(){var t=ae.apply(null,arguments).map(Nt);return new x(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,a){return x.resolve(i).then(function(o){t[a]=o,--r||e(t)},n)})})},resolve:function(t){if(t instanceof x)return t;if(t&&typeof t.then=="function")return new x(function(n,r){t.then(n,r)});var e=new x(ot,!0,t);return ki(e,wn),e},reject:Tt,race:function(){var t=ae.apply(null,arguments).map(Nt);return new x(function(e,n){t.map(function(r){return x.resolve(r).then(e,n)})})},PSD:{get:function(){return C},set:function(t){return C=t}},totalEchoes:{get:function(){return Bt}},newPSD:me,usePSD:He,scheduler:{get:function(){return st},set:function(t){st=t}},rejectionMapper:{get:function(){return En},set:function(t){En=t}},follow:function(t,e){return new x(function(n,r){return me(function(i,a){var o=C;o.unhandleds=[],o.onunhandled=a,o.finalize=$e(function(){var s=this;wo(function(){s.unhandleds.length===0?i():a(s.unhandleds[0])})},o.finalize),t()},e,n,r)})}});$t&&($t.allSettled&&ue(x,"allSettled",function(){var t=ae.apply(null,arguments).map(Nt);return new x(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,a){return x.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||e(r)})})})}),$t.any&&typeof AggregateError<"u"&&ue(x,"any",function(){var t=ae.apply(null,arguments).map(Nt);return new x(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(a,o){return x.resolve(a).then(function(s){return e(s)},function(s){i[o]=s,--r||n(new AggregateError(i))})})})}));function Ci(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&vt();n&&typeof n.then=="function"?Ci(t,function(i,a){n instanceof x?n._then(i,a):n.then(i,a)}):(t._state=!0,t._value=n,$i(t)),r&&yt()}},xn.bind(null,t))}catch(n){xn(t,n)}}function xn(t,e){if(St.push(e),t._state===null){var n=t._lib&&vt();e=En(e),t._state=!1,t._value=e,ne&&e!==null&&typeof e=="object"&&!e._promise&&eo(function(){var r=Ln(e,"stack");e._promise=t,ue(e,"stack",{get:function(){return bn?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),Eo(t),$i(t),n&&yt()}}function $i(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Yn(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ce===0&&(++Ce,st(function(){--Ce===0&&Gn()},[]))}function Yn(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ce,st(_o,[n,t,e])}function _o(t,e,n){try{wn=e;var r,i=e._value;e._state?r=t(i):(St.length&&(St=[]),r=t(i),St.indexOf(i)===-1&&Ao(e)),n.resolve(r)}catch(a){n.reject(a)}finally{wn=null,--Ce===0&&Gn(),--n.psd.ref||n.psd.finalize()}}function Si(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=yn(i,0)):(a=i,o=""),e.push(a+(o?": "+o:"")+r)}return ne&&(r=yn(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&Si(t._prev,e,n)),e}function ki(t,e){var n=e?e._numPrev+1:0;n<mo&&(t._prev=e,t._numPrev=n)}function _t(){vt()&&yt()}function vt(){var t=_n;return _n=!1,It=!1,t}function yt(){var t,e,n;do for(;Ye.length>0;)for(t=Ye,Ye=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Ye.length>0);_n=!0,It=!0}function Gn(){var t=xe;xe=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=kt.slice(0),n=e.length;n;)e[--n]()}function wo(t){function e(){t(),kt.splice(kt.indexOf(e),1)}kt.push(e),++Ce,st(function(){--Ce===0&&Gn()},[])}function Eo(t){xe.some(function(e){return e._value===t._value})||xe.push(t)}function Ao(t){for(var e=xe.length;e;)if(xe[--e]._value===t._value){xe.splice(e,1);return}}function Tt(t){return new x(ot,!1,t)}function B(t,e){var n=C;return function(){var r=vt(),i=C;try{return ge(n,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{ge(i,!1),r&&yt()}}}var H={awaits:0,echoes:0,id:0},xo=0,Pt=[],tn=0,Bt=0,Co=0;function me(t,e,n,r){var i=C,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Co;var o=Ke.env;a.env=Wn?{Promise:x,PromiseProp:{value:x,configurable:!0,writable:!0},all:x.all,race:x.race,allSettled:x.allSettled,any:x.any,resolve:x.resolve,reject:x.reject,nthen:Er(o.nthen,a),gthen:Er(o.gthen,a)}:{},e&&z(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=He(a,t,n,r);return a.ref===0&&a.finalize(),s}function je(){return H.id||(H.id=++xo),++H.awaits,H.echoes+=Ei,H.id}function ce(){return H.awaits?(--H.awaits===0&&(H.id=0),H.echoes=H.awaits*Ei,!0):!1}(""+Ai).indexOf("[native code]")===-1&&(je=ce=M);function Nt(t){return H.echoes&&t&&t.constructor===$t?(je(),t.then(function(e){return ce(),e},function(e){return ce(),F(e)})):t}function $o(t){++Bt,(!H.echoes||--H.echoes===0)&&(H.echoes=H.id=0),Pt.push(C),ge(t,!0)}function So(){var t=Pt[Pt.length-1];Pt.pop(),ge(t,!1)}function ge(t,e){var n=C;if((e?H.echoes&&(!tn++||t!==C):tn&&(!--tn||t!==C))&&Pi(e?$o.bind(null,t):So),t!==C&&(C=t,n===Ke&&(Ke.env=Ti()),Wn)){var r=Ke.env.Promise,i=t.env;Mt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(I,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ti(){var t=I.Promise;return Wn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(I,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Mt.then,gthen:t.prototype.then}:{}}function He(t,e,n,r,i){var a=C;try{return ge(t,!0),e(n,r,i)}finally{ge(a,!1)}}function Pi(t){Ai.call(mn,t)}function Ft(t,e,n,r){return typeof t!="function"?t:function(){var i=C;n&&je(),ge(e,!0);try{return t.apply(this,arguments)}finally{ge(i,!1),r&&Pi(ce)}}}function Er(t,e){return function(n,r){return t.call(this,Ft(n,e),Ft(r,e))}}var Ar="unhandledrejection";function xr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(I.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Ar,!0,!0),z(r,i)):I.CustomEvent&&(r=new CustomEvent(Ar,{detail:i}),z(r,i)),r&&I.dispatchEvent&&(dispatchEvent(r),!I.PromiseRejectionEvent&&I.onunhandledrejection))try{I.onunhandledrejection(r)}catch{}ne&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var F=x.reject;function Cn(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!C.letThrough&&!t._vip){if(t._state.openComplete)return F(new k.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return F(new k.DatabaseClosed);t.open().catch(M)}return t._state.dbReadyPromise.then(function(){return Cn(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===Un.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Cn(t,e,n,r)})):F(a)}return i._promise(e,function(a,o){return me(function(){return C.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var Cr="3.2.2",Ee=String.fromCharCode(65535),$n=-1/0,re="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ri="String expected.",Xe=[],Wt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ko=Wt,To=Wt,Di=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},Yt="__dbnames",nn="readonly",rn="readwrite";function Se(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Oi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wt(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=dt(e),delete e[t]),e}:function(e){return e}}var Po=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||C.trans,a=this.name;function o(u,c,f){if(!f.schema[a])throw new k.NotFound("Table "+a+" not part of transaction");return n(f.idbtrans,f)}var s=vt();try{return i&&i.db===this.db?i===C.trans?i._promise(e,o,r):me(function(){return i._promise(e,o,r)},{trans:i,transless:C.transless||C}):Cn(this.db,e,[this.name],o)}finally{s&&yt()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(U(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=N(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(f){return f.compound&&n.every(function(l){return f.keyPath.indexOf(l)>=0})&&f.keyPath.every(function(l){return n.indexOf(l)>=0})})[0];if(r&&this.db._maxKey!==Ee)return this.where(r.name).equals(r.keyPath.map(function(f){return e[f]}));!r&&ne&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(f,l){try{return a.cmp(f,l)===0}catch{return!1}}var s=n.reduce(function(f,l){var h=f[0],y=f[1],p=i[l],d=e[l];return[h||p,h||!p?Se(y,p&&p.multi?function(m){var _=se(m,l);return U(_)&&_.some(function(w){return o(d,w)})}:function(m){return o(d,se(m,l))}):y]},[null,null]),u=s[0],c=s[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,U(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var a in r)if(Y(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){z(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,s=e;return o&&a&&(s=wt(o)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?x.reject(u.failures[0]):u.lastResult}).then(function(u){if(o)try{J(e,o,u)}catch{}return u})},t.prototype.update=function(e,n){if(typeof e=="object"&&!U(e)){var r=se(e,this.schema.primKey.keyPath);if(r===void 0)return F(new k.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?N(n).forEach(function(i){J(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,s=e;return o&&a&&(s=wt(o)(e)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?x.reject(u.failures[0]):u.lastResult}).then(function(u){if(o)try{J(e,o,u)}catch{}return u})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?x.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Oi})}).then(function(n){return n.numFailures?x.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,c=u.auto,f=u.keyPath;if(f&&a)throw new k.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new k.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,h=f&&c?e.map(wt(f)):e;return i.core.mutate({trans:s,type:"add",keys:a,values:h,wantResults:o}).then(function(y){var p=y.numFailures,d=y.results,m=y.lastResult,_=y.failures,w=o?d:m;if(p===0)return w;throw new Qe(i.name+".bulkAdd(): "+p+" of "+l+" operations failed",_)})})},t.prototype.bulkPut=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,c=u.auto,f=u.keyPath;if(f&&a)throw new k.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new k.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,h=f&&c?e.map(wt(f)):e;return i.core.mutate({trans:s,type:"put",keys:a,values:h,wantResults:o}).then(function(y){var p=y.numFailures,d=y.results,m=y.lastResult,_=y.failures,w=o?d:m;if(p===0)return w;throw new Qe(i.name+".bulkPut(): "+p+" of "+l+" operations failed",_)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var a=i.numFailures,o=i.lastResult,s=i.failures;if(a===0)return o;throw new Qe(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",s)})},t}();function mt(t){var e={},n=function(s,u){if(u){for(var c=arguments.length,f=new Array(c-1);--c;)f[c-1]=arguments[c];return e[s].subscribe.apply(null,f),t}else if(typeof s=="string")return e[s]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(s,u,c){if(typeof s=="object")return o(s);u||(u=yo),c||(c=M);var f={subscribers:[],fire:c,subscribe:function(l){f.subscribers.indexOf(l)===-1&&(f.subscribers.push(l),f.fire=u(f.fire,l))},unsubscribe:function(l){f.subscribers=f.subscribers.filter(function(h){return h!==l}),f.fire=f.subscribers.reduce(u,c)}};return e[s]=n[s]=f,f}function o(s){N(s).forEach(function(u){var c=s[u];if(U(c))a(u,s[u][0],s[u][1]);else if(c==="asap")var f=a(u,pt,function(){for(var h=arguments.length,y=new Array(h);h--;)y[h]=arguments[h];f.subscribers.forEach(function(p){di(function(){p.apply(null,y)})})});else throw new k.InvalidArgument("Invalid event config")})}}function gt(t,e){return Fe(e).from({prototype:t}),e}function Ro(t){return gt(Po.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:mt(null,{creating:[ho,M],reading:[fo,pt],updating:[vo,M],deleting:[po,M]})})}function Te(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function an(t,e){t.filter=Se(t.filter,e)}function on(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Se(r(),e())}:e,t.justLimit=n&&!r}function Do(t,e){t.isMatch=Se(t.isMatch,e)}function Rt(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new k.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function $r(t,e,n){var r=Rt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Et(t,e,n,r){var i=t.replayFilter?Se(t.filter,t.replayFilter()):t.filter;if(t.or){var a={},o=function(s,u,c){if(!i||i(u,c,function(h){return u.stop(h)},function(h){return u.fail(h)})){var f=u.primaryKey,l=""+f;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(f)),Y(a,l)||(a[l]=!0,e(s,u,c))}};return Promise.all([t.or._iterate(o,n),Sr($r(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}else return Sr($r(t,r,n),Se(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Sr(t,e,n,r){var i=r?function(o,s,u){return n(r(o),s,u)}:n,a=B(i);return t.then(function(o){if(o)return o.start(function(){var s=function(){return o.continue()};(!e||e(o,function(u){return s=u},function(u){o.stop(u),s=M},function(u){o.fail(u),s=M}))&&a(o.value,o,function(u){return s=u}),s()})})}function V(t,e){try{var n=kr(t),r=kr(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Ko(Tr(t),Tr(e));case"Array":return Oo(t,e)}}catch{}return NaN}function Oo(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a){var o=V(t[a],e[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function Ko(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a)if(t[a]!==e[a])return t[a]<e[a]?-1:1;return n===r?0:n<r?-1:1}function kr(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=pn(t);return n==="ArrayBuffer"?"binary":n}function Tr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Mo=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,F.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,F.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Se(n.algorithm,e)},t.prototype._iterate=function(e,n){return Et(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&z(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return Et(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Te(i,!0))return a.count({trans:r,query:{index:Rt(i,a.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var o=0;return Et(i,function(){return++o,!1},r,a).then(function(){return o})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],a=r.length-1;function o(c,f){return f?o(c[r[f]],f-1):c[i]}var s=this._ctx.dir==="next"?1:-1;function u(c,f){var l=o(c,a),h=o(f,a);return l<h?-s:l>h?s:0}return this.toArray(function(c){return c.sort(u)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Te(i,!0)&&i.limit>0){var a=i.valueMapper,o=Rt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(u){var c=u.result;return a?c.map(a):c})}else{var s=[];return Et(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Te(n)?on(n,function(){var r=e;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):on(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),on(this._ctx,function(){var n=e;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},t.prototype.until=function(e,n){return an(this._ctx,function(r,i,a){return e(r.value)?(i(a),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return an(this._ctx,function(n){return e(n.value)}),Do(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Te(n,!0)&&n.limit>0)return this._read(function(i){var a=Rt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return an(this._ctx,function(i){var a=i.primaryKey.toString(),o=Y(r,a);return r[a]=!0,!o}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof e=="function")a=e;else{var o=N(e),s=o.length;a=function(_){for(var w=!1,g=0;g<s;++g){var b=o[g],v=e[b];se(_,b)!==v&&(J(_,b,v),w=!0)}return w}}var u=r.table.core,c=u.schema.primaryKey,f=c.outbound,l=c.extractKey,h=n.db._options.modifyChunkSize||200,y=[],p=0,d=[],m=function(_,w){var g=w.failures,b=w.numFailures;p+=_-b;for(var v=0,E=N(g);v<E.length;v++){var $=E[v];y.push(g[$])}};return n.clone().primaryKeys().then(function(_){var w=function(g){var b=Math.min(h,_.length-g);return u.getMany({trans:i,keys:_.slice(g,g+b),cache:"immutable"}).then(function(v){for(var E=[],$=[],A=f?[]:null,S=[],T=0;T<b;++T){var O=v[T],K={value:dt(O),primKey:_[g+T]};a.call(K,K.value,K)!==!1&&(K.value==null?S.push(_[g+T]):!f&&V(l(O),l(K.value))!==0?(S.push(_[g+T]),E.push(K.value)):($.push(K.value),f&&A.push(_[g+T])))}var D=Te(r)&&r.limit===1/0&&(typeof e!="function"||e===sn)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&u.mutate({trans:i,type:"add",values:E}).then(function(j){for(var P in j.failures)S.splice(parseInt(P),1);m(E.length,j)})).then(function(){return($.length>0||D&&typeof e=="object")&&u.mutate({trans:i,type:"put",keys:A,values:$,criteria:D,changeSpec:typeof e!="function"&&e}).then(function(j){return m($.length,j)})}).then(function(){return(S.length>0||D&&e===sn)&&u.mutate({trans:i,type:"delete",keys:S,criteria:D}).then(function(j){return m(S.length,j)})}).then(function(){return _.length>g+b&&w(g+h)})})};return w(0).then(function(){if(y.length>0)throw new Kt("Error modifying one or more objects",y,p,d);return _.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return Te(e)&&(e.isPrimKey&&!To||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,a=n;return e.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(s){var u=s.failures;s.lastResult,s.results;var c=s.numFailures;if(c)throw new Kt("Could not delete some values",Object.keys(u).map(function(f){return u[f]}),o-c);return o-c})})}):this.modify(sn)},t}(),sn=function(t,e){return e.value=null};function Io(t){return gt(Mo.prototype,function(n,r){this.db=t;var i=Oi,a=null;if(r)try{i=r()}catch(c){a=c}var o=n._ctx,s=o.table,u=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:u!==pt?u:null}})}function Bo(t,e){return t<e?-1:t===e?0:1}function No(t,e){return t>e?-1:t===e?0:1}function W(t,e,n){var r=t instanceof Mi?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Pe(t){return new t.Collection(t,function(){return Ki("")}).limit(0)}function Fo(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Lo(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function jo(t,e,n,r,i,a){for(var o=Math.min(t.length,r.length),s=-1,u=0;u<o;++u){var c=e[u];if(c!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):s>=0?t.substr(0,s)+e[s]+n.substr(s+1):null;i(t[u],c)<0&&(s=u)}return o<r.length&&a==="next"?t+n.substr(t.length):o<t.length&&a==="prev"?t.substr(0,n.length):s<0?null:t.substr(0,s)+r[s]+n.substr(s+1)}function At(t,e,n,r){var i,a,o,s,u,c,f,l=n.length;if(!n.every(function(d){return typeof d=="string"}))return W(t,Ri);function h(d){i=Fo(d),a=Lo(d),o=d==="next"?Bo:No;var m=n.map(function(_){return{lower:a(_),upper:i(_)}}).sort(function(_,w){return o(_.lower,w.lower)});s=m.map(function(_){return _.upper}),u=m.map(function(_){return _.lower}),c=d,f=d==="next"?"":r}h("next");var y=new t.Collection(t,function(){return he(s[0],u[l-1]+r)});y._ondirectionchange=function(d){h(d)};var p=0;return y._addAlgorithm(function(d,m,_){var w=d.key;if(typeof w!="string")return!1;var g=a(w);if(e(g,u,p))return!0;for(var b=null,v=p;v<l;++v){var E=jo(w,g,s[v],u[v],o,c);E===null&&b===null?p=v+1:(b===null||o(b,E)>0)&&(b=E)}return m(b!==null?function(){d.continue(b+f)}:_),!1}),y}function he(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Ki(t){return{type:1,lower:t,upper:t}}var Mi=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?Pe(this):new this.Collection(this,function(){return he(e,n,!r,!i)})}catch{return W(this,re)}},t.prototype.equals=function(e){return e==null?W(this,re):new this.Collection(this,function(){return Ki(e)})},t.prototype.above=function(e){return e==null?W(this,re):new this.Collection(this,function(){return he(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?W(this,re):new this.Collection(this,function(){return he(e,void 0,!1)})},t.prototype.below=function(e){return e==null?W(this,re):new this.Collection(this,function(){return he(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?W(this,re):new this.Collection(this,function(){return he(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?W(this,Ri):this.between(e,e+Ee,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):At(this,function(n,r){return n.indexOf(r[0])===0},[e],Ee)},t.prototype.equalsIgnoreCase=function(e){return At(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=ae.apply(De,arguments);return e.length===0?Pe(this):At(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=ae.apply(De,arguments);return e.length===0?Pe(this):At(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,Ee)},t.prototype.anyOf=function(){var e=this,n=ae.apply(De,arguments),r=this._cmp;try{n.sort(r)}catch{return W(this,re)}if(n.length===0)return Pe(this);var i=new this.Collection(this,function(){return he(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?e._ascending:e._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,s,u){for(var c=o.key;r(c,n[a])>0;)if(++a,a===n.length)return s(u),!1;return r(c,n[a])===0?!0:(s(function(){o.continue(n[a])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[$n,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=ae.apply(De,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return W(this,re)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[$n,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,s=this._min,u=this._max;if(e.length===0)return Pe(this);if(!e.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&a(v[0],v[1])<=0}))return W(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",k.InvalidArgument);var c=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function l(v,E){for(var $=0,A=v.length;$<A;++$){var S=v[$];if(i(E[0],S[1])<0&&i(E[1],S[0])>0){S[0]=s(S[0],E[0]),S[1]=u(S[1],E[1]);break}}return $===A&&v.push(E),v}var h=a;function y(v,E){return h(v[0],E[0])}var p;try{p=e.reduce(l,[]),p.sort(y)}catch{return W(this,re)}var d=0,m=f?function(v){return a(v,p[d][1])>0}:function(v){return a(v,p[d][1])>=0},_=c?function(v){return o(v,p[d][0])>0}:function(v){return o(v,p[d][0])>=0};function w(v){return!m(v)&&!_(v)}var g=m,b=new this.Collection(this,function(){return he(p[0][0],p[p.length-1][1],!c,!f)});return b._ondirectionchange=function(v){v==="next"?(g=m,h=a):(g=_,h=o),p.sort(y)},b._addAlgorithm(function(v,E,$){for(var A=v.key;g(A);)if(++d,d===p.length)return E($),!1;return w(A)?!0:(r._cmp(A,p[d][1])===0||r._cmp(A,p[d][0])===0||E(function(){h===a?v.continue(p[d][0]):v.continue(p[d][1])}),!1)}),b},t.prototype.startsWithAnyOf=function(){var e=ae.apply(De,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?Pe(this):this.inAnyRange(e.map(function(n){return[n,n+Ee]})):W(this,"startsWithAnyOf() only works with strings")},t}();function Ho(t){return gt(Mi.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=t._deps.indexedDB;if(!a)throw new k.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,s){return a.cmp(s,o)},this._max=function(o,s){return a.cmp(o,s)>0?o:s},this._min=function(o,s){return a.cmp(o,s)<0?o:s},this._IDBKeyRange=t._deps.IDBKeyRange})}function te(t){return B(function(e){return ut(e),t(e.target.error),!1})}function ut(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ct="storagemutated",ve="x-storagemutated-1",be=mt(null,ct),Uo=function(){function t(){}return t.prototype._lock=function(){return We(!C.global),++this._reculock,this._reculock===1&&!C.global&&(C.lockOwnerFor=this),this},t.prototype._unlock=function(){if(We(!C.global),--this._reculock===0)for(C.global||(C.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{He(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&C.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(We(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new k.DatabaseClosed(i);case"MissingAPIError":throw new k.MissingAPI(i.message,i);default:throw new k.OpenFailed(i)}if(!this.active)throw new k.TransactionInactive;return We(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=B(function(a){ut(a),n._reject(e.error)}),e.onabort=B(function(a){ut(a),n.active&&n._reject(new k.Abort(e.error)),n.active=!1,n.on("abort").fire(a)}),e.oncomplete=B(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&be.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return F(new k.ReadOnly("Transaction is readonly"));if(!this.active)return F(new k.TransactionInactive);if(this._locked())return new x(function(o,s){i._blockedFuncs.push([function(){i._promise(e,n,r).then(o,s)},C])});if(r)return me(function(){var o=new x(function(s,u){i._lock();var c=n(s,u,i);c&&c.then&&c.then(s,u)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new x(function(o,s){var u=n(o,s,i);u&&u.then&&u.then(o,s)});return a._lib=!0,a},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=x.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new x(function(o,s){r.then(function(u){return n._waitingQueue.push(B(o.bind(null,u)))},function(u){return n._waitingQueue.push(B(s.bind(null,u)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new k.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(Y(n,e))return n[e];var r=this.schema[e];if(!r)throw new k.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function Vo(t){return gt(Uo.prototype,function(n,r,i,a,o){var s=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=mt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new x(function(u,c){s._resolve=u,s._reject=c}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var c=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):c&&s.idbtrans&&s.idbtrans.abort(),F(u)})})}function Sn(t,e,n,r,i,a,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Ii(e)}}function Ii(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Bi(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:pi(n,function(r){return[r.name,r]})}}function zo(t){return t.length===1?t[0]:t}var lt=function(t){try{return t.only([[]]),lt=function(){return[[]]},[[]]}catch{return lt=function(){return Ee},Ee}};function kn(t){return t==null?function(){}:typeof t=="string"?Wo(t):function(e){return se(e,t)}}function Wo(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return se(n,t)}}function Pr(t){return[].slice.call(t)}var Yo=0;function qe(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function Go(t,e,n){function r(l,h){var y=Pr(l.objectStoreNames);return{schema:{name:l.name,tables:y.map(function(p){return h.objectStore(p)}).map(function(p){var d=p.keyPath,m=p.autoIncrement,_=U(d),w=d==null,g={},b={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:_,keyPath:d,autoIncrement:m,unique:!0,extractKey:kn(d)},indexes:Pr(p.indexNames).map(function(v){return p.index(v)}).map(function(v){var E=v.name,$=v.unique,A=v.multiEntry,S=v.keyPath,T=U(S),O={name:E,compound:T,keyPath:S,unique:$,multiEntry:A,extractKey:kn(S)};return g[qe(S)]=O,O}),getIndexByKeyPath:function(v){return g[qe(v)]}};return g[":id"]=b.primaryKey,d!=null&&(g[qe(d)]=b.primaryKey),b})},hasGetAll:y.length>0&&"getAll"in h.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=l.lower,y=l.upper,p=l.lowerOpen,d=l.upperOpen,m=h===void 0?y===void 0?null:e.upperBound(y,!!d):y===void 0?e.lowerBound(h,!!p):e.bound(h,y,!!p,!!d);return m}function a(l){var h=l.name;function y(m){var _=m.trans,w=m.type,g=m.keys,b=m.values,v=m.range;return new Promise(function(E,$){E=B(E);var A=_.objectStore(h),S=A.keyPath==null,T=w==="put"||w==="add";if(!T&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var O=(g||b||{length:1}).length;if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var K,D=[],j=[],P=0,G=function(ee){++P,ut(ee)};if(w==="deleteRange"){if(v.type===4)return E({numFailures:P,failures:j,results:[],lastResult:void 0});v.type===3?D.push(K=A.clear()):D.push(K=A.delete(i(v)))}else{var X=T?S?[b,g]:[b,null]:[g,null],le=X[0],Z=X[1];if(T)for(var Q=0;Q<O;++Q)D.push(K=Z&&Z[Q]!==void 0?A[w](le[Q],Z[Q]):A[w](le[Q])),K.onerror=G;else for(var Q=0;Q<O;++Q)D.push(K=A[w](le[Q])),K.onerror=G}var fe=function(ee){var Ue=ee.target.result;D.forEach(function(q,bt){return q.error!=null&&(j[bt]=q.error)}),E({numFailures:P,failures:j,results:w==="delete"?g:D.map(function(q){return q.result}),lastResult:Ue})};K.onerror=function(ee){G(ee),fe(ee)},K.onsuccess=fe})}function p(m){var _=m.trans,w=m.values,g=m.query,b=m.reverse,v=m.unique;return new Promise(function(E,$){E=B(E);var A=g.index,S=g.range,T=_.objectStore(h),O=A.isPrimaryKey?T:T.index(A.name),K=b?v?"prevunique":"prev":v?"nextunique":"next",D=w||!("openKeyCursor"in O)?O.openCursor(i(S),K):O.openKeyCursor(i(S),K);D.onerror=te($),D.onsuccess=B(function(j){var P=D.result;if(!P){E(null);return}P.___id=++Yo,P.done=!1;var G=P.continue.bind(P),X=P.continuePrimaryKey;X&&(X=X.bind(P));var le=P.advance.bind(P),Z=function(){throw new Error("Cursor not started")},Q=function(){throw new Error("Cursor not stopped")};P.trans=_,P.stop=P.continue=P.continuePrimaryKey=P.advance=Z,P.fail=B($),P.next=function(){var fe=this,ee=1;return this.start(function(){return ee--?fe.continue():fe.stop()}).then(function(){return fe})},P.start=function(fe){var ee=new Promise(function(q,bt){q=B(q),D.onerror=te(bt),P.fail=bt,P.stop=function(Ui){P.stop=P.continue=P.continuePrimaryKey=P.advance=Q,q(Ui)}}),Ue=function(){if(D.result)try{fe()}catch(q){P.fail(q)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return D.onsuccess=B(function(q){D.onsuccess=Ue,Ue()}),P.continue=G,P.continuePrimaryKey=X,P.advance=le,Ue(),ee},E(P)},$)})}function d(m){return function(_){return new Promise(function(w,g){w=B(w);var b=_.trans,v=_.values,E=_.limit,$=_.query,A=E===1/0?void 0:E,S=$.index,T=$.range,O=b.objectStore(h),K=S.isPrimaryKey?O:O.index(S.name),D=i(T);if(E===0)return w({result:[]});if(m){var j=v?K.getAll(D,A):K.getAllKeys(D,A);j.onsuccess=function(le){return w({result:le.target.result})},j.onerror=te(g)}else{var P=0,G=v||!("openKeyCursor"in K)?K.openCursor(D):K.openKeyCursor(D),X=[];G.onsuccess=function(le){var Z=G.result;if(!Z)return w({result:X});if(X.push(v?Z.value:Z.primaryKey),++P===E)return w({result:X});Z.continue()},G.onerror=te(g)}})}}return{name:h,schema:l,mutate:y,getMany:function(m){var _=m.trans,w=m.keys;return new Promise(function(g,b){g=B(g);for(var v=_.objectStore(h),E=w.length,$=new Array(E),A=0,S=0,T,O=function(P){var G=P.target;($[G._pos]=G.result)!=null,++S===A&&g($)},K=te(b),D=0;D<E;++D){var j=w[D];j!=null&&(T=v.get(w[D]),T._pos=D,T.onsuccess=O,T.onerror=K,++A)}A===0&&g($)})},get:function(m){var _=m.trans,w=m.key;return new Promise(function(g,b){g=B(g);var v=_.objectStore(h),E=v.get(w);E.onsuccess=function($){return g($.target.result)},E.onerror=te(b)})},query:d(u),openCursor:p,count:function(m){var _=m.query,w=m.trans,g=_.index,b=_.range;return new Promise(function(v,E){var $=w.objectStore(h),A=g.isPrimaryKey?$:$.index(g.name),S=i(b),T=S?A.count(S):A.count();T.onsuccess=B(function(O){return v(O.target.result)}),T.onerror=te(E)})}}}var o=r(t,n),s=o.schema,u=o.hasGetAll,c=s.tables.map(function(l){return a(l)}),f={};return c.forEach(function(l){return f[l.name]=l}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(l){var h=f[l];if(!h)throw new Error("Table '"+l+"' not found");return f[l]},MIN_KEY:-1/0,MAX_KEY:lt(e),schema:s}}function Qo(t,e){return e.reduce(function(n,r){var i=r.create;return R(R({},n),i(n))},t)}function Xo(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=Qo(Go(e,i,r),t.dbcore);return{dbcore:a}}function Qn(t,e){var n=t._novip,r=e.db,i=Xo(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(s){return s.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function Lt(t,e,n,r){var i=t._novip;n.forEach(function(a){var o=r[a];e.forEach(function(s){var u=Ln(s,a);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?ue(s,a,{get:function(){return this.table(a)},set:function(c){fi(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):s[a]=new i.Table(a,o))})})}function Tn(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function qo(t,e){return t._cfg.version-e._cfg.version}function Jo(t,e,n,r){var i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),s=C.transless||C;me(function(){C.trans=a,C.transless=s,e===0?(N(i).forEach(function(u){Xn(n,u,i[u].primKey,i[u].indexes)}),Qn(t,n),x.follow(function(){return t.on.populate.fire(a)}).catch(o)):Zo(t,e,a,n).catch(o)})}function Zo(t,e,n,r){var i=t._novip,a=[],o=i._versions,s=i._dbSchema=qn(i,i.idbdb,r),u=!1,c=o.filter(function(l){return l._cfg.version>=e});c.forEach(function(l){a.push(function(){var h=s,y=l._cfg.dbschema;Rn(i,h,r),Rn(i,y,r),s=i._dbSchema=y;var p=Ni(h,y);p.add.forEach(function(b){Xn(r,b[0],b[1].primKey,b[1].indexes)}),p.change.forEach(function(b){if(b.recreate)throw new k.Upgrade("Not yet support for changing primary key");var v=r.objectStore(b.name);b.add.forEach(function(E){return Pn(v,E)}),b.change.forEach(function(E){v.deleteIndex(E.name),Pn(v,E)}),b.del.forEach(function(E){return v.deleteIndex(E)})});var d=l._cfg.contentUpgrade;if(d&&l._cfg.version>e){Qn(i,r),n._memoizedTables={},u=!0;var m=vi(y);p.del.forEach(function(b){m[b]=h[b]}),Tn(i,[i.Transaction.prototype]),Lt(i,[i.Transaction.prototype],N(m),m),n.schema=m;var _=jn(d);_&&je();var w,g=x.follow(function(){if(w=d(n),w&&_){var b=ce.bind(null,null);w.then(b,b)}});return w&&typeof w.then=="function"?x.resolve(w):g.then(function(){return w})}}),a.push(function(h){if(!u||!ko){var y=l._cfg.dbschema;ts(y,h)}Tn(i,[i.Transaction.prototype]),Lt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function f(){return a.length?x.resolve(a.shift()(n.idbtrans)).then(f):x.resolve()}return f().then(function(){es(s,r)})}function Ni(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],a=e[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Wt)o.recreate=!0,n.change.push(o);else{var s=i.idxByName,u=a.idxByName,c=void 0;for(c in s)u[c]||o.del.push(c);for(c in u){var f=s[c],l=u[c];f?f.src!==l.src&&o.change.push(l):o.add.push(l)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function Xn(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return Pn(i,a)}),i}function es(t,e){N(t).forEach(function(n){e.db.objectStoreNames.contains(n)||Xn(e,n,t[n].primKey,t[n].indexes)})}function ts(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function Pn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function qn(t,e,n){var r={},i=Vt(e.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),s=o.keyPath,u=Sn(Ii(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),c=[],f=0;f<o.indexNames.length;++f){var l=o.index(o.indexNames[f]);s=l.keyPath;var h=Sn(l.name,s,!!l.unique,!!l.multiEntry,!1,s&&typeof s!="string",!1);c.push(h)}r[a]=Bi(a,u,c)}),r}function ns(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=qn(r,e,n);r._storeNames=Vt(e.objectStoreNames,0),Lt(r,[r._allTables],N(i),i)}function rs(t,e){var n=qn(t,t.idbdb,e),r=Ni(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Rn(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],s=n.objectStore(o);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var c=s.indexNames[u],f=s.index(c).keyPath,l=typeof f=="string"?f:"["+Vt(f).join("+")+"]";if(e[o]){var h=e[o].idxByName[l];h&&(h.name=c,delete e[o].idxByName[l],e[o].idxByName[c]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&I.WorkerGlobalScope&&I instanceof I.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function is(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Sn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),U(i),n===0)})}var as=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){N(e).forEach(function(r){if(e[r]!==null){var i=is(e[r]),a=i.shift();if(a.multi)throw new k.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new k.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new k.Schema("Index must have a name and cannot be an empty string")}),n[r]=Bi(r,a,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?z(this._cfg.storesSource,e):e;var r=n._versions,i={},a={};return r.forEach(function(o){z(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,Tn(n,[n._allTables,n,n.Transaction.prototype]),Lt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],N(a),a),n._storeNames=N(a),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Vn(this._cfg.contentUpgrade||M,e),this},t}();function os(t){return gt(as.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Jn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new nr(Yt,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Zn(t){return t&&typeof t.databases=="function"}function ss(t){var e=t.indexedDB,n=t.IDBKeyRange;return Zn(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Yt})}):Jn(e,n).toCollection().primaryKeys()}function us(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Zn(n)&&e!==Yt&&Jn(n,r).put({name:e}).catch(M)}function cs(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Zn(n)&&e!==Yt&&Jn(n,r).delete(e).catch(M)}function Dn(t){return me(function(){return C.letThrough=!0,t()})}function ls(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function fs(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?F(e.dbOpenError):t});ne&&(e.openCanceller._stackHolder=ke()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new k.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,o=null,s=!1;return x.race([r,(typeof navigator>"u"?x.resolve():ls()).then(function(){return new x(function(u,c){if(i(),!n)throw new k.MissingAPI;var f=t.name,l=e.autoSchema?n.open(f):n.open(f,Math.round(t.verno*10));if(!l)throw new k.MissingAPI;l.onerror=te(c),l.onblocked=B(t._fireOnBlocked),l.onupgradeneeded=B(function(h){if(o=l.transaction,e.autoSchema&&!t._options.allowEmptyDB){l.onerror=ut,o.abort(),l.result.close();var y=n.deleteDatabase(f);y.onsuccess=y.onerror=B(function(){c(new k.NoSuchDatabase("Database "+f+" doesnt exist"))})}else{o.onerror=te(c);var p=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;s=p<1,t._novip.idbdb=l.result,Jo(t,p/10,o,c)}},c),l.onsuccess=B(function(){o=null;var h=t._novip.idbdb=l.result,y=Vt(h.objectStoreNames);if(y.length>0)try{var p=h.transaction(zo(y),"readonly");e.autoSchema?ns(t,h,p):(Rn(t,t._dbSchema,p),rs(t,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Qn(t,p)}catch{}Xe.push(t),h.onversionchange=B(function(d){e.vcFired=!0,t.on("versionchange").fire(d)}),h.onclose=B(function(d){t.on("close").fire(d)}),s&&us(t._deps,f),u()},c)})})]).then(function(){return i(),e.onReadyBeingFired=[],x.resolve(Dn(function(){return t.on.ready.fire(t.vip)})).then(function u(){if(e.onReadyBeingFired.length>0){var c=e.onReadyBeingFired.reduce(Vn,M);return e.onReadyBeingFired=[],x.resolve(Dn(function(){return c(t.vip)})).then(u)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(u){e.dbOpenError=u;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),F(u)}).finally(function(){e.openComplete=!0,a()})}function On(t){var e=function(o){return t.next(o)},n=function(o){return t.throw(o)},r=a(e),i=a(n);function a(o){return function(s){var u=o(s),c=u.value;return u.done?c:!c||typeof c.then!="function"?U(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(e)()}function hs(t,e,n){var r=arguments.length;if(r<2)throw new k.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=yi(i);return[t,a,n]}function Fi(t,e,n,r,i){return x.resolve().then(function(){var a=C.transless||C,o=t._createTransaction(e,n,t._dbSchema,r),s={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(l){return l.name===Un.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Fi(t,e,n,null,i)})):F(l)}var u=jn(i);u&&je();var c,f=x.follow(function(){if(c=i.call(o,o),c)if(u){var l=ce.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=On(c))},s);return(c&&typeof c.then=="function"?x.resolve(c).then(function(l){return o.active?l:F(new k.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return c})).then(function(l){return r&&o._resolve(),o._completion.then(function(){return l})}).catch(function(l){return o._reject(l),F(l)})})}function xt(t,e,n){for(var r=U(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function ds(t){return R(R({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},a=[];function o(d,m,_){var w=qe(d),g=i[w]=i[w]||[],b=d==null?0:typeof d=="string"?1:d.length,v=m>0,E=R(R({},_),{isVirtual:v,keyTail:m,keyLength:b,extractKey:kn(d),unique:!v&&_.unique});if(g.push(E),E.isPrimaryKey||a.push(E),b>1){var $=b===2?d[0]:d.slice(0,b-1);o($,m+1,_)}return g.sort(function(A,S){return A.keyTail-S.keyTail}),E}var s=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,c=r.indexes;u<c.length;u++){var f=c[u];o(f.keyPath,0,f)}function l(d){var m=i[qe(d)];return m&&m[0]}function h(d,m){return{type:d.type===1?2:d.type,lower:xt(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:xt(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0}}function y(d){var m=d.query.index;return m.isVirtual?R(R({},d),{query:{index:m,range:h(d.query.range,m.keyTail)}}):d}var p=R(R({},n),{schema:R(R({},r),{primaryKey:s,indexes:a,getIndexByKeyPath:l}),count:function(d){return n.count(y(d))},query:function(d){return n.query(y(d))},openCursor:function(d){var m=d.query.index,_=m.keyTail,w=m.isVirtual,g=m.keyLength;if(!w)return n.openCursor(d);function b(v){function E(A){A!=null?v.continue(xt(A,d.reverse?t.MAX_KEY:t.MIN_KEY,_)):d.unique?v.continue(v.key.slice(0,g).concat(d.reverse?t.MIN_KEY:t.MAX_KEY,_)):v.continue()}var $=Object.create(v,{continue:{value:E},continuePrimaryKey:{value:function(A,S){v.continuePrimaryKey(xt(A,t.MAX_KEY,_),S)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var A=v.key;return g===1?A[0]:A.slice(0,g)}},value:{get:function(){return v.value}}});return $}return n.openCursor(y(d)).then(function(v){return v&&b(v)})}});return p}})}var ps={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ds};function er(t,e,n,r){return n=n||{},r=r||"",N(t).forEach(function(i){if(!Y(e,i))n[r+i]=void 0;else{var a=t[i],o=e[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var s=pn(a),u=pn(o);s!==u?n[r+i]=e[i]:s==="Object"?er(a,o,n,r+i+"."):a!==o&&(n[r+i]=e[i])}else a!==o&&(n[r+i]=e[i])}}),N(e).forEach(function(i){Y(t,i)||(n[r+i]=e[i])}),n}function vs(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var ys={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return R(R({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=R(R({},n),{mutate:function(a){var o=C.trans,s=o.table(e).hook,u=s.deleting,c=s.creating,f=s.updating;switch(a.type){case"add":if(c.fire===M)break;return o._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===M&&f.fire===M)break;return o._promise("readwrite",function(){return l(a)},!0);case"delete":if(u.fire===M)break;return o._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(u.fire===M)break;return o._promise("readwrite",function(){return h(a)},!0)}return n.mutate(a);function l(p){var d=C.trans,m=p.keys||vs(r,p);if(!m)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?R(R({},p),{keys:m}):R({},p),p.type!=="delete"&&(p.values=hn([],p.values,!0)),p.keys&&(p.keys=hn([],p.keys,!0)),ms(n,p,m).then(function(_){var w=m.map(function(g,b){var v=_[b],E={onerror:null,onsuccess:null};if(p.type==="delete")u.fire.call(E,g,v,d);else if(p.type==="add"||v===void 0){var $=c.fire.call(E,g,p.values[b],d);g==null&&$!=null&&(g=$,p.keys[b]=g,r.outbound||J(p.values[b],r.keyPath,g))}else{var A=er(v,p.values[b]),S=f.fire.call(E,A,g,v,d);if(S){var T=p.values[b];Object.keys(S).forEach(function(O){Y(T,O)?T[O]=S[O]:J(T,O,S[O])})}}return E});return n.mutate(p).then(function(g){for(var b=g.failures,v=g.results,E=g.numFailures,$=g.lastResult,A=0;A<m.length;++A){var S=v?v[A]:m[A],T=w[A];S==null?T.onerror&&T.onerror(b[A]):T.onsuccess&&T.onsuccess(p.type==="put"&&_[A]?p.values[A]:S)}return{failures:b,results:v,numFailures:E,lastResult:$}}).catch(function(g){return w.forEach(function(b){return b.onerror&&b.onerror(g)}),Promise.reject(g)})})}function h(p){return y(p.trans,p.range,1e4)}function y(p,d,m){return n.query({trans:p,values:!1,query:{index:r,range:d},limit:m}).then(function(_){var w=_.result;return l({type:"delete",keys:w,trans:p}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):w.length<m?{failures:[],numFailures:0,lastResult:void 0}:y(p,R(R({},d),{lower:w[w.length-1],lowerOpen:!0}),m)})})}}});return i}})}};function ms(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Li(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,a=0;i<e.keys.length&&a<t.length;++i)V(e.keys[i],t[a])===0&&(r.push(n?dt(e.values[i]):e.values[i]),++a);return r.length===t.length?r:null}catch{return null}}var gs={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return R(R({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Li(r.keys,r.trans._cache,r.cache==="clone");return i?x.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?dt(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},un;function tr(t){return!("from"in t)}var ie=function(t,e){if(this)z(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new ie;return t&&"d"in t&&z(n,t),n}};Ne(ie.prototype,(un={add:function(t){return jt(this,t),this},addKey:function(t){return ft(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return ft(e,n,n)}),this}},un[vn]=function(){return Kn(this)},un));function ft(t,e,n){var r=V(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(tr(t))return z(t,{from:e,to:n,d:1});var i=t.l,a=t.r;if(V(n,t.from)<0)return i?ft(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Rr(t);if(V(e,t.to)>0)return a?ft(a,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Rr(t);V(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),V(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var o=!t.r;i&&!t.l&&jt(t,i),a&&o&&jt(t,a)}}function jt(t,e){function n(r,i){var a=i.from,o=i.to,s=i.l,u=i.r;ft(r,a,o),s&&n(r,s),u&&n(r,u)}tr(e)||n(t,e)}function bs(t,e){var n=Kn(e),r=n.next();if(r.done)return!1;for(var i=r.value,a=Kn(t),o=a.next(i.from),s=o.value;!r.done&&!o.done;){if(V(s.from,i.to)<=0&&V(s.to,i.from)>=0)return!0;V(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(o=a.next(i.from)).value}return!1}function Kn(t){var e=tr(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&V(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||V(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Rr(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=R({},t),s=t[i];t.from=s.from,t.to=s.to,t[i]=s[i],o[i]=s[a],t[a]=o,o.d=Dr(o)}t.d=Dr(t)}function Dr(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var _s={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new ie(t.MIN_KEY,t.MAX_KEY);return R(R({},t),{table:function(r){var i=t.table(r),a=i.schema,o=a.primaryKey,s=o.extractKey,u=o.outbound,c=R(R({},i),{mutate:function(h){var y=h.trans,p=y.mutatedParts||(y.mutatedParts={}),d=function($){var A="idb://"+e+"/"+r+"/"+$;return p[A]||(p[A]=new ie)},m=d(""),_=d(":dels"),w=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],b=g[0],v=g[1],E=h.trans._cache;return i.mutate(h).then(function($){if(U(b)){w!=="delete"&&(b=$.results),m.addKeys(b);var A=Li(b,E);!A&&w!=="add"&&_.addKeys(b),(A||v)&&ws(d,a,A,v)}else if(b){var S={from:b.lower,to:b.upper};_.add(S),m.add(S)}else m.add(n),_.add(n),a.indexes.forEach(function(T){return d(T.name).add(n)});return $})}}),f=function(h){var y,p,d=h.query,m=d.index,_=d.range;return[m,new ie((y=_.lower)!==null&&y!==void 0?y:t.MIN_KEY,(p=_.upper)!==null&&p!==void 0?p:t.MAX_KEY)]},l={get:function(h){return[o,new ie(h.key)]},getMany:function(h){return[o,new ie().addKeys(h.keys)]},count:f,query:f,openCursor:f};return N(l).forEach(function(h){c[h]=function(y){var p=C.subscr;if(p){var d=function(E){var $="idb://"+e+"/"+r+"/"+E;return p[$]||(p[$]=new ie)},m=d(""),_=d(":dels"),w=l[h](y),g=w[0],b=w[1];if(d(g.name||"").add(b),!g.isPrimaryKey)if(h==="count")_.add(n);else{var v=h==="query"&&u&&y.values&&i.query(R(R({},y),{values:!1}));return i[h].apply(this,arguments).then(function(E){if(h==="query"){if(u&&y.values)return v.then(function(T){var O=T.result;return m.addKeys(O),E});var $=y.values?E.result.map(s):E.result;y.values?m.addKeys($):_.addKeys($)}else if(h==="openCursor"){var A=E,S=y.values;return A&&Object.create(A,{key:{get:function(){return _.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var T=A.primaryKey;return _.addKey(T),T}},value:{get:function(){return S&&m.addKey(A.primaryKey),A.value}}})}return E})}}return i[h].apply(this,arguments)}}),c}})}};function ws(t,e,n,r){function i(a){var o=t(a.name||"");function s(c){return c!=null?a.extractKey(c):null}var u=function(c){return a.multiEntry&&U(c)?c.forEach(function(f){return o.addKey(f)}):o.addKey(c)};(n||r).forEach(function(c,f){var l=n&&s(n[f]),h=r&&s(r[f]);V(l,h)!==0&&(l!=null&&u(l),h!=null&&u(h))})}e.indexes.forEach(i)}var nr=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=R({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new x(function(s){o.dbReadyResolve=s}),o.openCanceller=new x(function(s,u){o.cancelOpen=u}),this._state=o,this.name=e,this.on=mt(this,"populate","blocked","versionchange","close",{ready:[Vn,M]}),this.on.ready.subscribe=hi(this.on.ready.subscribe,function(s){return function(u,c){t.vip(function(){var f=r._state;if(f.openComplete)f.dbOpenError||x.resolve().then(u),c&&s(u);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(u),c&&s(u);else{s(u);var l=r;c||s(function h(){l.on.ready.unsubscribe(u),l.on.ready.unsubscribe(h)})}})}}),this.Collection=Io(this),this.Table=Ro(this),this.Transaction=Vo(this),this.Version=os(this),this.WhereClause=Ho(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=lt(n.IDBKeyRange),this._createTransaction=function(s,u,c,f){return new r.Transaction(s,u,c,r._options.chromeTransactionDurability,f)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Xe.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(ps),this.use(ys),this.use(_s),this.use(gs),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(s){return s(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new k.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new k.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(qo),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||C.letThrough||this._vip)?e():new x(function(r,i){if(n._state.openComplete)return i(new k.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new k.DatabaseClosed);return}n.open().catch(M)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,a=e.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(s,u){return s.level-u.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},t.prototype.open=function(){return fs(this)},t.prototype._close=function(){var e=this._state,n=Xe.indexOf(this);if(n>=0&&Xe.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new x(function(r){e.dbReadyResolve=r}),e.openCanceller=new x(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new k.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new x(function(i,a){var o=function(){e.close();var s=e._deps.indexedDB.deleteDatabase(e.name);s.onsuccess=B(function(){cs(e._deps,e.name),i()}),s.onerror=te(a),s.onblocked=e._fireOnBlocked};if(n)throw new k.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return N(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=hs.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,a=C.trans;(!a||a.db!==this||e.indexOf("!")!==-1)&&(a=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(f){var l=f instanceof i.Table?f.name:f;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),e=="r"||e===nn)s=nn;else if(e=="rw"||e==rn)s=rn;else throw new k.InvalidArgument("Invalid transaction mode: "+e);if(a){if(a.mode===nn&&s===rn)if(o)a=null;else throw new k.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&u.forEach(function(f){if(a&&a.storeNames.indexOf(f)===-1)if(o)a=null;else throw new k.SubTransaction("Table "+f+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(f){return a?a._promise(null,function(l,h){h(f)}):F(f)}var c=Fi.bind(null,this,s,u,a,r);return a?a._promise(s,c,"lock"):C.trans?He(C.transless,function(){return i._whenReady(c)}):this._whenReady(c)},t.prototype.table=function(e){if(!Y(this._allTables,e))throw new k.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),Es=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",As=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[Es]=function(){return this},t}();function ji(t,e){return N(e).forEach(function(n){var r=t[n]||(t[n]=new ie);jt(r,e[n])}),t}function xs(t){return new As(function(e){var n=jn(t);function r(y){n&&je();var p=function(){return me(t,{subscr:y,trans:null})},d=C.trans?He(C.transless,p):p();return n&&d.then(ce,ce),d}var i=!1,a={},o={},s={get closed(){return i},unsubscribe:function(){i=!0,be.storagemutated.unsubscribe(l)}};e.start&&e.start(s);var u=!1,c=!1;function f(){return N(o).some(function(y){return a[y]&&bs(a[y],o[y])})}var l=function(y){ji(a,y),f()&&h()},h=function(){if(!(u||i)){a={};var y={},p=r(y);c||(be(ct,l),c=!0),u=!0,Promise.resolve(p).then(function(d){u=!1,!i&&(f()?h():(a={},o=y,e.next&&e.next(d)))},function(d){u=!1,e.error&&e.error(d),s.unsubscribe()})}};return h(),s})}var Mn;try{Mn={indexedDB:I.indexedDB||I.mozIndexedDB||I.webkitIndexedDB||I.msIndexedDB,IDBKeyRange:I.IDBKeyRange||I.webkitIDBKeyRange}}catch{Mn={indexedDB:null,IDBKeyRange:null}}var we=nr;Ne(we,R(R({},zt),{delete:function(t){var e=new we(t,{addons:[]});return e.delete()},exists:function(t){return new we(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return ss(we.dependencies).then(t)}catch{return F(new k.MissingAPI)}},defineClass:function(){function t(e){z(this,e)}return t},ignoreTransaction:function(t){return C.trans?He(C.transless,t):t()},vip:Dn,async:function(t){return function(){try{var e=On(t.apply(this,arguments));return!e||typeof e.then!="function"?x.resolve(e):e}catch(n){return F(n)}}},spawn:function(t,e,n){try{var r=On(t.apply(n,e||[]));return!r||typeof r.then!="function"?x.resolve(r):r}catch(i){return F(i)}},currentTransaction:{get:function(){return C.trans||null}},waitFor:function(t,e){var n=x.resolve(typeof t=="function"?we.ignoreTransaction(t):t).timeout(e||6e4);return C.trans?C.trans.waitFor(n):n},Promise:x,debug:{get:function(){return ne},set:function(t){gi(t,t==="dexie"?function(){return!0}:Di)}},derive:Fe,extend:z,props:Ne,override:hi,Events:mt,on:be,liveQuery:xs,extendObservabilitySet:ji,getByKeyPath:se,setByKeyPath:J,delByKeyPath:to,shallowClone:vi,deepClone:dt,getObjectDiff:er,cmp:V,asap:di,minKey:$n,addons:[],connections:Xe,errnames:Un,dependencies:Mn,semVer:Cr,version:Cr.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));we.maxKey=lt(we.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(be(ct,function(t){if(!oe){var e;Wt?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ve,!0,!0,t)):e=new CustomEvent(ve,{detail:t}),oe=!0,dispatchEvent(e),oe=!1}}),addEventListener(ve,function(t){var e=t.detail;oe||Ht(e)}));function Ht(t){var e=oe;try{oe=!0,be.storagemutated.fire(t)}finally{oe=e}}var oe=!1;if(typeof BroadcastChannel<"u"){var Or=new BroadcastChannel(ve);be(ct,function(t){oe||Or.postMessage(t)}),Or.onmessage=function(t){t.data&&Ht(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){be(ct,function(t){try{oe||(typeof localStorage<"u"&&localStorage.setItem(ve,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&hn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:ve,changedParts:t})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(t){if(t.key===ve){var e=JSON.parse(t.newValue);e&&Ht(e.changedParts)}});var Kr=self.document&&navigator.serviceWorker;Kr&&Kr.addEventListener("message",Cs)}function Cs(t){var e=t.data;e&&e.type===ve&&Ht(e.changedParts)}x.rejectionMapper=lo;gi(ne,Di);class $s extends nr{constructor(){super("VirMCMapperDatabase");Gt(this,"minecraftWorlds");Gt(this,"minecraftBlockNames");this.version(1).stores({minecraftWorlds:"&name, &blocks.x, &blocks.y, &blocks.z",minecraftBlockNames:"++index, &blockName"})}}const Ss=new $s;async function ks(){const t=await Ss.minecraftBlockNames.toArray();return Ts(t)}function Ts(t){const e={},n={};return t.forEach(r=>{e[r.index]=r.blockName,n[r.blockName]=r.index}),{byIndex:e,byName:n}}function Ps(t,e){t.postMessage(e)}var Hi=(t=>(t.Main="main",t.BlockReader="block-reader",t))(Hi||{}),Ae=(t=>(t.GetBlockCount="get-block-count",t.StartExtractingBlocks="start-extracting-blocks",t.ProgressReport="progress-report",t.InitWorker="init-worker",t.Close="close",t))(Ae||{});function ze(t){return e=>{const n=e.data;return oi(n,t),n}}const Rs=ci()({["start-extracting-blocks"]:ze({type:"start-extracting-blocks",blockNames:{byIndex:{},byName:{}},mcaFile:new File([],"")}),["get-block-count"]:ze({type:"get-block-count",mcaFile:new File([],"")}),["progress-report"]:ze({type:"progress-report",current:0,total:0}),["init-worker"]:ze({type:"init-worker",minecraftVersion:Fn.java[1][19][2],parseGroupSize:0,worldName:"",workerCount:0,workerType:"main"}),close:ze({type:"close"})});function Ds(t){return Rs[t]}function Os(t){const e=t.data,n=Ds(e.type);let r;try{r=n==null?void 0:n(t)}catch(i){console.error(i)}if(r==null)throw console.error({event:t}),new Error("Invalid worker message event received.");return r}const Mr=["message","messageerror","error"];async function In(t,e,n){const r=ui();function i(a){var o,s;try{const u=Os(a instanceof MessageEvent?a:(s=(o=a.data)!=null?o:a.detail)!=null?s:{data:a});if(n&&u.type!==n)throw new Error(`Expected response data type of "${n}" but got "${u.type}"`);r.resolve(u)}catch(u){r.reject(u)}Mr.forEach(u=>{t.removeEventListener(u,i)})}return Mr.forEach(a=>{t.addEventListener(a,i)}),Ps(t,e),r.promise}const Ks="/src/parser/parser-worker/parser-worker.ts";function Ms(t,e){const n=new Worker(Ks,{type:"module",name:t});return n.onerror=r=>{console.error(`${t} worker encountered an error: ${r}`)},n.onmessageerror=r=>{console.error(`${t} worker encountered a message error: ${r}`)},e&&(n.onmessage=e),n}async function Is(t){const e=Ms("main-worker"),n=await In(e,{type:Ae.InitWorker,workerCount:t.workerCount,minecraftVersion:t.minecraftVersion,parseGroupSize:100,worldName:t.worldName,workerType:Hi.Main},Ae.ProgressReport);throw n.current!==t.workerCount?new Error(`Failed to create "${t.workerCount}" number of workers. Only got "${n.current}".`):(await za(t.mcaFiles,async r=>{await ks(),await Bs(e,r)}),await In(e,{type:Ae.Close},Ae.ProgressReport),e.terminate(),console.info("Main worker terminated"),new Error("Implement reading the blocks"))}async function Bs(t,e,n){const r=await In(t,{type:Ae.GetBlockCount,mcaFile:e});if(r.type!==Ae.ProgressReport)throw new Error("Expected progress report after initial start reading files message");console.info(`${e.name} totalBlocks:`,r.total)}Qr({tagName:"vir-app",stateInit:{progress:void 0,workerCount:window.navigator.hardwareConcurrency*2-1},styles:ja`
        :host {
            display: flex;
            padding: 64px;
        }

        .progress {
            height: 16px;
            width: 200px;
            position: relative;
            box-sizing: border-box;
            border: 1px solid red;
        }

        .inner-div {
            height: 100%;
            box-sizing: border-box;
            background-color: black;
        }
    `,renderCallback:({state:t,updateState:e})=>br`
            ${t.progress==null?"":br`
                      <div class="progress">
                          <div class="inner-div" style="width: ${t.progress}%"></div>
                      </div>
                  `}
            <input
                ${Oa("change",n=>Ns(n,e,t.workerCount))}
                type="file"
                id="fileElem"
                multiple
            />
        `});async function Ns(t,e,n){const r=t.target,i=Array.from(r.files||[]);if(!i.length)throw new Error("No files were selected");Is({workerCount:n,mcaFiles:i,minecraftVersion:Fn.java[1][19][2],worldName:""})}
